{>layout/}

{<blocks__main_panel}
	
	<div>
		
		<h1>Console
			<span class="pull-right">
				<a class="btn danger" href="javascript:window.location.reload()">Reload</a>
			</span>
		</h1>
		
		<div class="row">
			<div class="">
				
				<div id="jsconsole-div" class="well">
					<iframe id="jsconsole-iframe" src="/console/proxy/static/console.html" onLoad="_jsconsoleHack();"></iframe>
				</div>
				
			</div>
		</div>
		
	</div>
	
{/blocks__main_panel}

{<layout__extra_head}
	
	<style type="text/css">
		
		#jsconsole-div {
			margin : 0px;
			padding : 4px;
			min-height : 200px;
			min-width : 400px;
		}
		
		#jsconsole-iframe {
			margin : 0px;
			padding : 0px;
			min-height : 200px;
			min-width : 400px;
			width : 100%;
			height : 100%;
			border : 0;
		}
		
	</style>
	
	<script type="text/javascript">
		
		function _jsconsoleHack () {
			document.getElementById ("jsconsole-iframe").contentWindow._getUrlPrefix = "/console/proxy";
		}
		
		function _jsconsoleDivResize () {
			var _div = document.getElementById ("jsconsole-div");
			var _top = 0;
			var _left = 0;
			var _parentDiv = _div;
			while (true) {
				if (_parentDiv.y)
					_top += _parentDiv.y;
				if (_parentDiv.x)
					_left += _parentDiv.x;
				_top += _parentDiv.offsetTop;
				_left += _parentDiv.offsetLeft;
				if (!_parentDiv.offsetParent)
					break;
				_parentDiv = _parentDiv.offsetParent;
			}
			_div.style.height = (window.innerHeight - _top - 64) + "px";
			_div.style.width = (window.innerWidth - _left - 64) + "px";
			setTimeout (_jsconsoleDivResize, 1000);
		}
		
		setTimeout (_jsconsoleDivResize, 100);
		
	</script>
	
{/layout__extra_head}
